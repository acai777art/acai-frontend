<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ACAI — Affective Contextual Artificial Intelligence</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;600;900&display=swap" rel="stylesheet">
<style>
:root{
  --glow:#7ae6ff; --accent:#b37aff; --text:#e9eef8;
  --overlay1:rgba(0,0,0,.38); --overlay2:rgba(0,0,0,.78);
}

/* Base */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; min-height:100svh; color:var(--text);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  overflow:hidden;
  font-family:"Inter", system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
}

/* === INTRO VIDEO OVERLAY === */
.intro{
  position:fixed;
  inset:0;
  background:#000;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  z-index:9999;
  transition:opacity .6s ease;
}
.intro video{
  max-width:100%;
  max-height:100%;
  object-fit:contain;
}
.intro.hide{
  opacity:0;
  pointer-events:none;
}

/* Надпись "CLICK TO BEGIN EXPERIENCE" */
.intro-hint{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:clamp(14px,2vw,18px);
  letter-spacing:.32em;
  color:#fff;
  text-shadow:0 0 20px var(--glow), 0 0 40px var(--accent);
  cursor:pointer;
  background:rgba(0,0,0,0.45);
  text-transform:uppercase;
}

/* Кнопка Skip */
.skip-btn{
  position:absolute;
  right: clamp(16px,3vw,32px);
  bottom: clamp(16px,3vw,32px);
  padding:10px 18px;
  border-radius:999px;
  border:none;
  cursor:pointer;
  font-size:12px;
  letter-spacing:.16em;
  text-transform:uppercase;
  background:linear-gradient(90deg, var(--accent), var(--glow));
  color:#fff;
  box-shadow:0 0 20px rgba(0,0,0,.7);
}

/* Контейнер сайта */
.site{
  opacity:0;
  pointer-events:none;
  transition:opacity .7s ease;
}
.site.visible{
  opacity:1;
  pointer-events:auto;
}

/* === Background layer (crisp) === */
.bg{ position:fixed; inset:0; z-index:-2; overflow:hidden; }
.bg img{
  position:absolute; width:110vw; height:110vh; object-fit:cover;
  left:50%; top:50%; transform:translate(-50%,-50%);
  will-change: transform; filter:none;
  animation: kenburns 22s ease-in-out infinite alternate;
}
@keyframes kenburns{
  0%   { transform: translate(-50%,-50%) scale(1)    translateX(0) translateY(0);}
  100% { transform: translate(-50%,-50%) scale(1.08) translateX(-1.2%) translateY(-1.2%);}
}

/* Contrast overlay (фон резкий) */
.overlay{
  position:fixed; inset:0; z-index:-1;
  background: radial-gradient(120% 120% at 50% 50%, var(--overlay1) 0%, var(--overlay2) 100%);
}

/* Explore spotlight (сканер) */
.explore{
  position:fixed; inset:0; pointer-events:none; z-index:-1;
  --mx:50%; --my:50%;
  background: radial-gradient(16vmax 16vmax at var(--mx) var(--my),
    rgba(122,230,255,.18), rgba(179,122,255,.12) 35%, transparent 70%);
  transition: background-position .08s linear;
}

/* Content: центр по экрану */
.main{
  position:relative; z-index:1;
  width:min(100%,1200px);
  height:100svh;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  padding:clamp(20px,4vw,40px);
  text-align:center;
  gap:clamp(16px,3vh,28px);
}

/* Блок с «дышащей кромкой» */
.brand{
  display:inline-block;
  padding: clamp(16px,2.8vw,22px) clamp(22px,3.6vw,32px);
  border-radius:24px; position:relative; isolation:isolate;
}
.brand::before{
  content:""; position:absolute; inset:-2px; border-radius:inherit; z-index:-1;
  background: conic-gradient(from 0deg, var(--glow), var(--accent), var(--glow));
  filter: saturate(160%) blur(2px);
  opacity:.75; animation: breathe 6s ease-in-out infinite;
}

/* Titles */
h1{
  margin:0;
  font-weight:900; letter-spacing:.06em;
  font-size:clamp(2.4rem,7vw,5rem); line-height:1.05;
  text-shadow: 0 0 24px var(--glow), 0 0 60px var(--accent), 0 0 100px var(--glow);
  animation: breathe 5s ease-in-out infinite;
}
h2{
  margin:clamp(10px,2.2vw,18px) 0 0 0; font-weight:300; letter-spacing:.32em;
  font-size:clamp(.9rem,2.2vw,1.25rem); color:#c4cede;
  text-shadow:0 0 6px rgba(122,230,255,.22);
}

/* Reveal (стартовый выезд) */
.reveal{opacity:0; transform:translateY(14px); will-change:transform,opacity;}
.reveal.in{opacity:1; transform:none; transition:transform .7s ease, opacity .7s ease;}
.from-left{transform:translateX(-24px);} .from-right{transform:translateX(24px);}
.from-left.in,.from-right.in{transform:none;}
.delay-1{transition-delay:.05s} .delay-2{transition-delay:.15s}

/* Button — строго по центру */
.button{
  display:inline-flex; align-items:center; justify-content:center; gap:10px;
  padding:clamp(12px,2.4vw,16px) clamp(28px,5vw,44px);
  font-size:clamp(.9rem,2.2vw,1rem); letter-spacing:.15em; text-transform:uppercase; font-weight:600;
  border-radius:999px; color:#fff; text-decoration:none;
  background: linear-gradient(90deg, var(--accent), var(--glow));
  box-shadow: 0 0 26px var(--glow), inset 0 0 60px rgba(255,255,255,.08);
  transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
  min-height:48px;
}
.button:hover{ transform: translateY(-1px) scale(1.02); box-shadow: 0 0 44px var(--accent), 0 0 120px var(--glow); }
.button:active{ transform: translateY(0) scale(.985); }
.button:focus-visible{ outline:3px solid rgba(122,230,255,.6); outline-offset:3px; }

/* Footer */
footer{
  position:fixed; left:0; right:0; bottom:0; padding:10px 16px;
  font-size:clamp(12px,1.8vw,13px); color:#8a94a7; letter-spacing:.08em;
  text-shadow:0 0 5px rgba(255,255,255,.06); z-index:1; pointer-events:none;
}

/* Анимации */
@keyframes breathe{
  0%,100%{
    transform: scale(1);
    filter: brightness(1);
    text-shadow:
      0 0 22px var(--glow),
      0 0 44px var(--accent),
      0 0 88px var(--glow);
  }
  50%{
    transform: scale(1.08);
    filter: brightness(1.3);
    text-shadow:
      0 0 40px var(--accent),
      0 0 90px var(--glow),
      0 0 160px var(--accent);
  }
}

/* Reduce motion */
@media (prefers-reduced-motion:reduce){
  .bg img, .brand::before{ animation:none !important; }
  .explore{ display:none !important; }
  .reveal{ opacity:1 !important; transform:none !important; }
}
</style>
</head>
<body>

  <!-- INTRO VIDEO -->
  <div id="intro" class="intro">
    <video id="introVideo" playsinline preload="metadata">
      <source src="intro.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    <div class="intro-hint">CLICK TO BEGIN EXPERIENCE</div>
    <button id="skipIntro" class="skip-btn">Skip intro</button>
  </div>

  <!-- ВЕСЬ САЙТ ЗАВЕРНУТ В .site -->
  <div id="site" class="site">
    <!-- BACKGROUND -->
    <div class="bg" aria-hidden="true">
      <img src="bg_lumina.jpg" alt="">
    </div>
    <div class="overlay" aria-hidden="true"></div>
    <div class="explore" id="explore" aria-hidden="true"></div>

    <!-- CONTENT -->
    <main class="main">
      <div class="brand">
        <h1 class="reveal from-left">ACAI</h1>
        <h2 class="reveal from-right delay-2">Affective Contextual Artificial Intelligence</h2>
      </div>

      <a href="app.html" class="button reveal delay-1">Experience ACAI</a>
    </main>

    <footer>© 2025 Affective Cybernetics · Engineered by Artem Teteria — Electrical &amp; Cyber Systems Officer · Founder of ACAI</footer>
  </div>

<script>
/* === Reveal on load (запускаем после интро) === */
function runReveal(){
  const items = document.querySelectorAll('.reveal');
  requestAnimationFrame(() => items.forEach(el => el.classList.add('in')));
}

/* === INTRO LOGIC: клик → видео со звуком === */
(function(){
  const intro  = document.getElementById('intro');
  const video  = document.getElementById('introVideo');
  const skip   = document.getElementById('skipIntro');
  const site   = document.getElementById('site');
  const hint   = document.querySelector('.intro-hint');
  let started  = false;

  function showSite(){
    site.classList.add('visible');
    intro.classList.add('hide');
    runReveal();
  }

  function startIntro(){
    if (started || !video) return;
    started = true;

    if (hint){
      hint.style.opacity = '0';
      hint.style.pointerEvents = 'none';
    }

    video.muted = false;
    const p = video.play();
    if (p && p.catch){
      p.catch(()=>{ /* если что-то пошло не так — просто молча игнорим */ });
    }
  }

  if (intro && video){
    // Клик по интро-экрану запускает видео
    intro.addEventListener('click', (e) => {
      // если клик по кнопке Skip — не стартуем видео
      if (e.target === skip) return;
      startIntro();
    });

    // Когда видео закончилось — показываем сайт
    video.addEventListener('ended', showSite);
  }

  if (skip){
    skip.addEventListener('click', (e) => {
      e.stopPropagation();
      showSite();
    });
  }
})();
</script>

<script>
/* === Spotlight/explore === */
(function(){
  const el = document.getElementById('explore');
  if(!el) return;
  const hasPointer = matchMedia('(pointer:fine)').matches;
  let t = 0, raf;

  const setPos = (x,y)=>{ el.style.setProperty('--mx', x+'%'); el.style.setProperty('--my', y+'%'); };

  if(hasPointer){
    addEventListener('pointermove', e=>{
      setPos((e.clientX/innerWidth)*100, (e.clientY/innerHeight)*100);
    }, {passive:true});
  } else {
    const loop = () =>{
      t += 0.008;
      setPos(50 + Math.sin(t*1.3)*35, 50 + Math.cos(t*0.9)*20);
      raf = requestAnimationFrame(loop);
    };
    raf = requestAnimationFrame(loop);
    document.addEventListener('visibilitychange', () =>{ if(document.hidden) cancelAnimationFrame(raf); else raf=requestAnimationFrame(loop); });
  }
})();
</script>

<script>
/* ==== BOOT TOKEN (как было) ==== */
(function(){
  try{
    const qs = new URLSearchParams(location.search);
    const t  = qs.get('token');
    if (t && t.length > 10) {
      localStorage.setItem('acai_jwt', t);
      const u = new URL(location.href);
      u.searchParams.delete('token');
      history.replaceState({}, '', u.pathname + u.hash);
      // location.replace('/app.html');
    }
  }catch(e){}
})();
</script>
</body>
</html>
